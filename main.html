<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>若雨.听风 - 主页</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome图标 -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 引入国旗图标库 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css">
  
  <!-- 配置Tailwind自定义属性 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4F46E5', // 主色调：靛蓝色，可自定义
            secondary: '#EC4899', // 辅助色：粉色，可自定义
            neutral: '#F3F4F6', // 中性色：浅灰色，可自定义
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'], // 字体，可自定义
          },
        },
      }
    }
  </script>
  
  <!-- 自定义工具类 -->
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .glass-effect {
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.18);
      }
      .btn-hover {
        @apply transition-all duration-300 hover:scale-105 hover:shadow-lg;
      }
    }
  </style>
  
  <style>
    /* 基础样式 */
    body {
      overflow-x: hidden;
      background-attachment: fixed;
      background-size: cover;
      background-position: center;
    }
    
    /* 加载动画 */
    .loader {
      border-top-color: #4F46E5;
      animation: spinner 1s linear infinite;
    }
    
    /* 打字机效果动画 */
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    
    .typing-effect {
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid white; /* 打字机光标 */
      animation: typing 1s steps(30, end);
    }
    
    /* 平滑滚动 */
    html {
      scroll-behavior: smooth;
    }
  </style>
</head>
<body class="font-inter text-gray-800">
  <!-- 背景图片 - 每日Bing美图 -->
  <div class="fixed inset-0 z-0">
    <img id="bing-bg" src="https://www.bing.com/th?id=OHR.WindmillsOfOman_ZH-CN8937012523_1920x1080.jpg" alt="每日Bing美图" class="w-full h-full object-cover" />
    <div class="absolute inset-0 bg-black/40"></div> <!-- 背景半透明遮罩，可调整透明度 -->
  </div>
  
  <!-- 主要内容区域 -->
  <main class="relative z-10 min-h-screen flex flex-col items-center justify-center p-4">
    <!-- 玻璃质感容器 -->
    <div class="glass-effect rounded-2xl p-8 md:p-12 w-full max-w-3xl shadow-2xl">
      <!-- 大标题 - 可自定义 -->
      <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-white text-center mb-4 tracking-tight">
        若雨.听风
      </h1>
      
      <!-- 小标题 - 可自定义 -->
      <h2 class="text-[clamp(1rem,3vw,1.5rem)] text-white/90 text-center mb-8">
        我也不知道写什么好……
      </h2>
      
      <!-- 一言接口区域 -->
      <div class="mb-12">
        <div class="flex items-center justify-center mb-4">
          <i class="fa fa-quote-left text-primary text-2xl mr-2"></i>
          <span class="text-white/80">每日一言</span>
          <i class="fa fa-quote-right text-primary text-2xl ml-2"></i>
        </div>
        
        <!-- 一言加载状态 -->
        <div id="hitokoto-container" class="glass-effect rounded-xl p-6 text-center">
          <div id="hitokoto-loading" class="flex flex-col items-center justify-center">
            <div class="loader w-12 h-12 border-4 border-gray-200 rounded-full"></div>
            <p class="mt-3 text-white/70">加载中...</p>
          </div>
          
          <div id="hitokoto-content" class="hidden text-center">
            <!-- 打字机效果容器 -->
            <div id="typing-container" class="mb-4">
              <p id="hitokoto-text" class="text-white/90 text-lg md:text-xl mb-2"></p>
            </div>
            <p id="hitokoto-author" class="text-white/60 text-sm"></p>
          </div>
        </div>
      </div>
      
      <!-- 四个圆角按钮区域 -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12">
        <!-- 按钮1 - 可自定义名称、链接和图标 -->
        <a href="https://bing.com/" target="_blank" class="glass-effect rounded-xl p-5 flex flex-col items-center justify-center btn-hover">
          <i class="fa fa-code text-2xl text-primary mb-2"></i>
          <span class="text-white/90 font-medium">博客</span>
        </a>
        
        <!-- 按钮2 - 可自定义名称、链接和图标 -->
        <a href="https://baidu.com/" target="_blank" class="glass-effect rounded-xl p-5 flex flex-col items-center justify-center btn-hover">
          <i class="fa fa-book text-2xl text-primary mb-2"></i>
          <span class="text-white/90 font-medium">MC服务器</span>
        </a>
        
        <!-- 按钮3 - 呼出邮件软件并预填邮箱 -->
        <a href="mailto:3949496696@qq.com" class="glass-effect rounded-xl p-5 flex flex-col items-center justify-center btn-hover">
          <i class="fa fa-envelope text-2xl text-primary mb-2"></i>
          <span class="text-white/90 font-medium">联系</span>
        </a>
        
        <!-- 按钮4 - 点击打开自定义弹窗 -->
        <button id="custom-modal-btn" class="glass-effect rounded-xl p-5 flex flex-col items-center justify-center btn-hover cursor-pointer">
          <i class="fa fa-info-circle text-2xl text-primary mb-2"></i>
          <span class="text-white/90 font-medium">未开放</span>
        </button>
      </div>
    </div>
  </main>
  
  <!-- 自定义弹窗（独立于按钮外） -->
  <div id="custom-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" id="modal-backdrop"></div>
    <div class="glass-effect rounded-2xl p-6 md:p-8 w-full max-w-md relative z-10">
      <button id="close-modal" class="absolute top-4 right-4 text-white/70 hover:text-white">
        <i class="fa fa-times text-xl"></i>
      </button>
      <h3 class="text-2xl font-bold text-white mb-4">↓↓↓</h3>
      <div class="text-white/90 mb-6">
        <p>什么都冇！！！</p>
      </div>
      <button id="confirm-modal" class="w-full glass-effect rounded-lg py-3 text-white font-medium btn-hover">
        确认关闭
      </button>
    </div>
  </div>

  <!-- 底部版权信息 -->
  <footer class="relative z-10 py-6 text-center text-white/60 text-sm">
    <p class="mt-2">© 2025-Now 版权所有 许可证 CC BY</p>
    
    <!-- IP属地信息展示区域 -->
    <div id="ip-location" class="mt-2 text-white/80">
      <span id="ip-loading">获取位置信息中...</span>
    </div>
    
    <p id="bing-copyright" class="text-white/60 text-sm mt-2">Bing图片版权信息</p>
  </footer>
  
  <script>
    // 一言API获取函数 - 可替换为其他API
    function fetchHitokoto() {
      const hitokotoUrl = 'https://v1.hitokoto.cn/'; // 一言API地址
      
      fetch(hitokotoUrl)
        .then(response => response.json())
        .then(data => {
          // 显示一言内容
          const textElement = document.getElementById('hitokoto-text');
          const authorElement = document.getElementById('hitokoto-author');
          
          // 触发打字机效果
          typeWriterEffect(data.hitokoto, textElement, data.from || '—— 佚名', authorElement);
        })
        .catch(error => {
          console.error('获取一言失败:', error);
          // 加载失败时显示默认内容
          const textElement = document.getElementById('hitokoto-text');
          const authorElement = document.getElementById('hitokoto-author');
          
          typeWriterEffect(
            '生活就像一盒巧克力，你永远不知道下一块会是什么味道。',
            textElement,
            '—— 《阿甘正传》',
            authorElement
          );
        });
    }
    
    // 打字机效果函数
    function typeWriterEffect(text, element, author, authorElement) {
      let i = 0;
      const speed = 50; // 打字速度（毫秒/字符）
      
      // 清空现有内容
      element.textContent = '';
      
      // 逐个字符输出
      const typing = setInterval(() => {
        if (i < text.length) {
          element.textContent += text.charAt(i);
          i++;
        } else {
          clearInterval(typing);
          // 显示作者信息
          authorElement.textContent = author;
          // 隐藏加载状态，显示内容
          document.getElementById('hitokoto-loading').classList.add('hidden');
          document.getElementById('hitokoto-content').classList.remove('hidden');
          
          // 添加打字机光标动画（可选）
          element.classList.add('typing-effect');
          setTimeout(() => {
            element.classList.remove('typing-effect');
          }, 1000); // 光标闪烁时长
        }
      }, speed);
    }
    
    // 获取Bing图片函数
    function loadBingImage() {
      const script = document.createElement('script');
      script.src = 'https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1&callback=processBingImage';
      document.head.appendChild(script);
    }
    function processBingImage(data) {
      const imageUrl = 'https://www.bing.com' + data.images[0].url;
      document.getElementById('bing-bg').src = imageUrl;
      
      // 显示版权信息
      const copyright = data.images[0].copyright;
      document.getElementById('bing-copyright').textContent = copyright || '图片来源：必应搜索';
    }
    
    // IP属地检测函数
    function fetchIpLocation() {
      const ipElement = document.getElementById('ip-location');
      const loadingElement = document.getElementById('ip-loading');
      
      // 使用ip-api.com获取IP信息（国内用户可替换为其他API）
      fetch('https://ip-api.com/json/')
        .then(response => response.json())
        .then(data => {
          // 隐藏加载状态
          loadingElement.classList.add('hidden');
          
          // 解析地区信息
          let country = data.country || '未知国家';
          let region = data.regionName || '未知地区';
          let city = data.city || '未知城市';
          let district = data.district || '';
          let isp = data.isp || '未知运营商';
          
          // 拼接完整地址（精确到区县）
          let location = `${country} ${region} ${city}`;
          if (district) location += ` ${district}`;
          
          // 生成国旗图标类名（例如：flag-icon-cn 表示中国国旗）
          const countryCode = data.countryCode.toLowerCase() || 'unknown';
          const flagClass = `flag-icon ${countryCode === 'unknown' ? '' : `flag-icon-${countryCode}`}`;
          
          // 渲染IP信息
          ipElement.innerHTML = `
            <span class="${flagClass} mr-2" style="vertical-align: middle;"></span>
            <span>${location}</span>
            <span class="ml-4">| 运营商: ${isp}</span>
          `;
        })
        .catch(error => {
          console.error('获取IP位置失败:', error);
          loadingElement.textContent = '获取位置信息失败';
        });
    }
    
    // 页面加载完成后执行
    document.addEventListener('DOMContentLoaded', () => {
      fetchHitokoto();
      loadBingImage();
      fetchIpLocation(); // 新增：获取IP属地信息
      
      // 为按钮添加点击动画效果
      const buttons = document.querySelectorAll('a.glass-effect, button.glass-effect');
      buttons.forEach(button => {
        // 桌面端鼠标事件
        button.addEventListener('mousedown', () => {
          button.classList.add('scale-95');
        });
        
        button.addEventListener('mouseup', () => {
          button.classList.remove('scale-95');
        });
        
        button.addEventListener('mouseleave', () => {
          button.classList.remove('scale-95');
        });
        
        // 移动端触摸事件
        button.addEventListener('touchstart', () => {
          button.classList.add('scale-95');
        });
        
        button.addEventListener('touchend', () => {
          button.classList.remove('scale-95');
        });
      });
    });
    
    // 弹窗交互逻辑
    const modalBtn = document.getElementById('custom-modal-btn');
    const modal = document.getElementById('custom-modal');
    const closeBtn = document.getElementById('close-modal');
    const confirmBtn = document.getElementById('confirm-modal');
    const backdrop = document.getElementById('modal-backdrop');
    
    // 打开弹窗
    modalBtn.addEventListener('click', () => {
      modal.classList.remove('hidden');
    });
    
    // 关闭弹窗的函数
    function closeModal() {
      modal.classList.add('hidden');
    }
    
    // 关闭按钮、确认按钮、背景点击事件
    closeBtn.addEventListener('click', closeModal);
    confirmBtn.addEventListener('click', closeModal);
    backdrop.addEventListener('click', closeModal);
  </script>
</body>
</html>